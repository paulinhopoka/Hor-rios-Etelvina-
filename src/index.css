@import "tailwindcss";

/* Variáveis Globais */
:root {
    --primary: #6366f1;
    --secondary: #10B981;
    --bg-body: #111827;
    --bg-card: #1F2937;
    --text-main: #F9FAFB;
    --text-muted: #9CA3AF;
    --border-color: #374151;
    --danger: #EF4444;
    --warning: #F59E0B;
    --interval-bg: #1E3A8A;
    --interval-text: #93C5FD;
    --card-shadow: 0 4px 6px rgba(0,0,0,0.3);
    --progress-bg: rgba(52, 211, 153, 0.15);
}

[data-theme="light"] {
    --primary: #4F46E5;
    --secondary: #10B981;
    --bg-body: #F3F4F6;
    --bg-card: #FFFFFF;
    --text-main: #1F2937;
    --text-muted: #6B7280;
    --border-color: #E5E7EB;
    --interval-bg: #DBEAFE;
    --interval-text: #1D4ED8;
    --card-shadow: 0 2px 4px rgba(0,0,0,0.05);
    --progress-bg: rgba(16, 185, 129, 0.15);
}

body { background-color: var(--bg-body); color: var(--text-main); transition: 0.3s; }
.app-container { width: 100%; max-width: 550px; min-height: 100vh; display: flex; flex-direction: column; padding-bottom: 40px; position: relative; margin: 0 auto; }

/* Header e Menu Minimalista */
header { background-color: var(--bg-card); padding: 15px 20px; box-shadow: var(--card-shadow); margin-bottom: 15px; position: sticky; top: 0; z-index: 50; }
.header-top { display: flex; justify-content: space-between; align-items: center; gap: 10px; }
.school-name { font-size: 1.2rem; font-weight: bold; border: none; background: transparent; color: var(--text-main); flex-grow: 1; outline: none; border-bottom: 1px dashed transparent; }
.school-name:focus { border-bottom: 1px dashed var(--primary); }

.menu-container { position: relative; }
.btn-menu { background: transparent; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-main); padding: 5px; border-radius: 8px; transition: 0.2s; }
.btn-menu:hover { background: var(--border-color); }

.dropdown-content { display: none; position: absolute; right: 0; top: 100%; background-color: var(--bg-card); min-width: 200px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); border-radius: 8px; overflow: hidden; z-index: 100; border: 1px solid var(--border-color); }
.dropdown-content.show { display: flex; flex-direction: column; }
.dropdown-content button { background: transparent; border: none; padding: 12px 16px; text-align: left; color: var(--text-main); cursor: pointer; font-size: 0.95rem; display: flex; align-items: center; gap: 8px; border-bottom: 1px solid var(--border-color); }
.dropdown-content button:hover { background-color: var(--border-color); }
.dropdown-content button:last-child { border-bottom: none; }

/* Controles de Navegação */
.controls-section { padding: 0 15px; display: flex; flex-direction: column; gap: 10px; margin-bottom: 10px; }
.shift-selector { display: flex; gap: 10px; background-color: var(--bg-card); padding: 5px; border-radius: 12px; box-shadow: var(--card-shadow); }
.btn-shift { flex: 1; padding: 10px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; background: transparent; color: var(--text-muted); transition: 0.2s; }
.btn-shift.active { background-color: var(--primary); color: white; }

.class-selector { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 5px; scrollbar-width: none; }
.class-selector::-webkit-scrollbar { display: none; }
.btn-class { padding: 8px 16px; border: 1px solid var(--border-color); border-radius: 20px; background-color: var(--bg-card); color: var(--text-main); cursor: pointer; white-space: nowrap; font-weight: bold; transition: 0.2s; }
.btn-class.active { background-color: var(--secondary); color: white; border-color: var(--secondary); }

.day-selector { display: flex; justify-content: space-between; gap: 5px; }
.btn-day { flex: 1; padding: 10px 0; border-radius: 10px; border: none; background-color: var(--bg-card); color: var(--text-main); font-weight: bold; cursor: pointer; box-shadow: var(--card-shadow); transition: 0.2s; }
.btn-day.active { background-color: var(--text-main); color: var(--bg-body); transform: scale(1.05); }

/* Botão Ativar Edição e Ferramentas */
.edit-toggle-container { padding: 0 15px; margin-bottom: 15px; }
.btn-toggle-edit { width: 100%; padding: 12px; border: 2px solid var(--border-color); background-color: var(--bg-card); color: var(--text-main); border-radius: 10px; font-weight: bold; font-size: 1rem; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 8px; }
.btn-toggle-edit.active { background-color: var(--primary); border-color: var(--primary); color: white; }

.edit-tools { display: none; padding: 0 15px; flex-direction: column; gap: 10px; margin-bottom: 10px; }
.app-container.editing-mode .edit-tools { display: flex; }
.btn-clear-moves { width: 100%; padding: 10px; background-color: var(--bg-card); border: 1px dashed var(--border-color); color: var(--text-muted); border-radius: 8px; cursor: pointer; font-weight: bold; }

/* Painel Entrada e Saída */
.day-bounds-header { display: flex; justify-content: space-between; background: var(--bg-card); padding: 10px 15px; border-radius: 12px; margin: 0 15px 15px 15px; box-shadow: var(--card-shadow); border: 1px solid var(--border-color); }
.bound-item { display: flex; flex-direction: column; align-items: center; width: 48%; }
.bound-label { font-size: 0.70rem; color: var(--text-muted); font-weight: bold; text-transform: uppercase; margin-bottom: 2px; }
.bound-val { font-size: 1.1rem; font-weight: bold; color: var(--text-main); }
.bound-item.altered { background-color: rgba(239, 68, 68, 0.05); border-radius: 8px; padding: 5px; }
.bound-item.altered .bound-val, .bound-item.altered .bound-label { color: var(--danger); }
.bounds-divider { width: 1px; background-color: var(--border-color); }

/* Lista de Aulas e CSS GRID Otimizado */
.schedule-list { padding: 0 15px; display: flex; flex-direction: column; gap: 10px; }

.class-card { background-color: var(--bg-card); border-radius: 12px; padding: 10px 15px; display: grid; grid-template-columns: 80px 1fr; align-items: center; gap: 15px; box-shadow: var(--card-shadow); border-left: 5px solid var(--primary); position: relative; overflow: hidden; z-index: 1; transition: 0.2s; }
.app-container.editing-mode .class-card { grid-template-columns: 30px 80px 1fr auto; padding: 10px; }

/* Barra de Progresso */
.class-card::before { content: ''; position: absolute; top: 0; left: 0; bottom: 0; width: var(--progress, 0%); background-color: var(--progress-bg); z-index: -1; transition: width 1s linear; }
.class-card.active-class { border-left-color: var(--secondary); }

.class-card.intervalo { display: flex; justify-content: center; background-color: var(--interval-bg); border-left-color: var(--interval-text); }
.class-card.vaga { border-left-color: var(--danger); }
.class-card.adiantada { border-left-color: var(--warning); }
.class-card.hidden-lesson { opacity: 0.5; background-color: var(--bg-body); border-left-color: var(--text-muted); filter: grayscale(0.8); }
.class-card.hidden-lesson .subject { text-decoration: line-through; }

.class-card.drag-over { border-top: 3px dashed var(--primary); }
.class-card.dragging { opacity: 0.4; }

.drag-handle { display: none; color: var(--text-muted); cursor: grab; font-size: 1.2rem; justify-content: center; }
.app-container.editing-mode .drag-handle { display: flex; }

.time-col { display: flex; flex-direction: column; align-items: center; justify-content: center; }
.time-start { font-size: 1.05rem; font-weight: bold; color: var(--text-main); }
.time-end { font-size: 0.75rem; font-weight: bold; color: var(--text-muted); }

.info-col { display: flex; flex-direction: column; min-width: 0; justify-content: center; }
.subject { font-weight: bold; font-size: 1.15rem; color: var(--text-main); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.teacher { font-size: 0.9rem; color: var(--text-muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 2px; }

.badge { font-size: 0.70rem; font-weight: bold; padding: 3px 6px; border-radius: 4px; margin-top: 4px; width: fit-content; }
.badge-vaga { background-color: rgba(239, 68, 68, 0.1); color: var(--danger); }
.badge-adiantada { background-color: rgba(245, 158, 11, 0.1); color: var(--warning); }
.badge-hidden { background-color: rgba(107, 114, 128, 0.2); color: var(--text-main); }
.intervalo-text { font-weight: bold; color: var(--interval-text); font-size: 1rem; letter-spacing: 1px; }

/* Controles do Card */
.card-controls { display: none; gap: 5px; flex-wrap: wrap; justify-content: flex-end; }
.app-container.editing-mode .card-controls { display: flex; }
.btn-ctrl { background: var(--bg-body); border: 1px solid var(--border-color); font-size: 1rem; cursor: pointer; padding: 6px; border-radius: 6px; color: var(--text-main); transition: 0.2s; display: flex; align-items: center; justify-content: center; min-width: 32px; }
.btn-ctrl:hover { background: var(--border-color); }

/* Modais */
.modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.6); display: none; justify-content: center; align-items: center; z-index: 1000; padding: 20px; }
.modal-overlay.show { display: flex; }
.modal { background: var(--bg-card); padding: 20px; border-radius: 12px; width: 100%; max-width: 380px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); max-height: 90vh; overflow-y: auto; }
.modal h3 { color: var(--text-main); margin-bottom: 15px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; }
.form-group { margin-bottom: 15px; }
.form-group label { display: block; font-size: 0.85rem; color: var(--text-muted); margin-bottom: 5px; font-weight: bold; }
.form-input { width: 100%; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; background: var(--bg-body); color: var(--text-main); font-size: 1rem; }

.modal-actions { display: flex; justify-content: space-between; gap: 10px; margin-top: 20px; flex-wrap: wrap; }
.btn-modal { padding: 10px 15px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; flex: 1; min-width: 100px;}
.btn-cancel { background: var(--border-color); color: var(--text-main); }
.btn-save-temp { background: var(--warning); color: white; }
.btn-save { background: var(--primary); color: white; }
.btn-danger { background: var(--danger); color: white; width: 100%; margin-top: 10px; }

.checkbox-group { display: flex; align-items: center; gap: 10px; margin-top: 15px; background: rgba(245, 158, 11, 0.1); padding: 10px; border-radius: 8px; border: 1px solid var(--warning); }
.checkbox-group input { width: 18px; height: 18px; cursor: pointer; }
.checkbox-group label { margin: 0; color: var(--text-main); cursor: pointer; }

.class-list-edit { display: flex; flex-direction: column; gap: 8px; margin-bottom: 20px; }
.class-edit-item { display: flex; justify-content: space-between; align-items: center; background: var(--bg-body); padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border-color); }
.add-class-box { display: flex; gap: 10px; }
